package attacks;

import BattleSystem.BattleBuffHolder;
import models.BattleStats;
import models.Player;
import utilities.BattleLog;

public class BuffVulnerability extends BuffEffect{
	
	private static final long serialVersionUID = -7994528404716162753L;
	boolean vulnerable;
	int vulnerableCounter;
	
	public BuffVulnerability(int chance, boolean vulnerable,
			int vulnerableCounter) {
		super(chance);
		this.vulnerable = vulnerable;
		this.vulnerableCounter = vulnerableCounter;
		this.keyword = "vulnerability";
	}
	@Override
	public void doBuffEffect(Player target, Player self, BattleBuffHolder bbHolder, BattleLog log) {
		BattleStats stats = target.getBattleStats();
		if (this.vulnerableCounter != 0) {
			stats.setVulnerable(this.vulnerable);
			if (this.vulnerableCounter > stats.getVulnerableCounter() && stats.isVulnerable()) {
				stats.setVulnerableCounter(this.vulnerableCounter);
			}
			if (!stats.isVulnerable()) {
				stats.setVulnerableCounter(0);
			}
		}
		if (this.vulnerableCounter == 0) {
			stats.setVulnerable(false);
		}
	}
	@Override
	public String toString() {
		return "BuffVulnerability [vulnerable=" + vulnerable + "\nvulnerableCounter=" + vulnerableCounter + "\nchance="
				+ chance + "\nkeyword=" + keyword + "]";
	}

	

}
